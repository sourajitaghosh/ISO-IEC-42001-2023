<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ISO 42001 Annex D - Sector & Domain Applicability Lens</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-blue: #0066cc;
            --primary-dark: #004080;
            --secondary-green: #28a745;
            --secondary-orange: #fd7e14;
            --secondary-red: #dc3545;
            --bg-light: #f8f9fa;
            --bg-white: #ffffff;
            --text-dark: #212529;
            --text-muted: #6c757d;
            --border-color: #dee2e6;
            --shadow-sm: 0 2px 4px rgba(0,0,0,0.1);
            --shadow-md: 0 4px 8px rgba(0,0,0,0.15);
            --shadow-lg: 0 8px 16px rgba(0,0,0,0.2);
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            background: var(--bg-white);
            border-radius: 16px;
            box-shadow: var(--shadow-lg);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, var(--primary-blue) 0%, var(--primary-dark) 100%);
            color: white;
            padding: 30px 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header-left h1 {
            font-size: 32px;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .header-left p {
            font-size: 16px;
            opacity: 0.9;
        }

        .header-right {
            display: flex;
            gap: 15px;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: white;
            color: var(--primary-blue);
        }

        .btn-primary:hover {
            background: var(--bg-light);
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: rgba(255,255,255,0.2);
            color: white;
            border: 2px solid white;
        }

        .btn-secondary:hover {
            background: rgba(255,255,255,0.3);
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 350px;
            gap: 0;
            min-height: calc(100vh - 200px);
        }

        .left-panel {
            padding: 30px 40px;
            overflow-y: auto;
            max-height: calc(100vh - 200px);
        }

        .right-panel {
            background: var(--bg-light);
            padding: 30px 25px;
            border-left: 1px solid var(--border-color);
            overflow-y: auto;
            max-height: calc(100vh - 200px);
        }

        .sector-selector-section {
            margin-bottom: 35px;
        }

        .section-title {
            font-size: 20px;
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-title::before {
            content: '';
            width: 4px;
            height: 24px;
            background: var(--primary-blue);
            border-radius: 2px;
        }

        .sector-wheel {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 12px;
            margin-bottom: 20px;
        }

        .sector-card {
            background: white;
            border: 2px solid var(--border-color);
            border-radius: 12px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }

        .sector-card:hover {
            border-color: var(--primary-blue);
            box-shadow: var(--shadow-md);
            transform: translateY(-3px);
        }

        .sector-card.active {
            background: var(--primary-blue);
            border-color: var(--primary-blue);
            color: white;
        }

        .sector-card .icon {
            font-size: 32px;
            margin-bottom: 8px;
        }

        .sector-card .name {
            font-size: 13px;
            font-weight: 600;
        }

        .current-sector-banner {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 35px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .current-sector-banner h2 {
            font-size: 24px;
            margin-bottom: 5px;
        }

        .current-sector-banner p {
            font-size: 14px;
            opacity: 0.9;
        }

        .relevance-legend {
            display: flex;
            gap: 15px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 13px;
        }

        .legend-badge {
            width: 20px;
            height: 20px;
            border-radius: 4px;
        }

        .badge-high {
            background: var(--secondary-green);
        }

        .badge-medium {
            background: var(--secondary-orange);
        }

        .badge-low {
            background: var(--text-muted);
        }

        .clauses-wheel-section {
            margin-bottom: 35px;
        }

        .wheel-container {
            position: relative;
            width: 600px;
            height: 600px;
            margin: 30px auto;
        }

        .clause-segment {
            position: absolute;
            width: 180px;
            height: 180px;
            border-radius: 16px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: var(--shadow-md);
        }

        .clause-segment:hover {
            transform: scale(1.1);
            box-shadow: var(--shadow-lg);
            z-index: 10;
        }

        .clause-segment.high {
            background: linear-gradient(135deg, #28a745, #20c997);
        }

        .clause-segment.medium {
            background: linear-gradient(135deg, #fd7e14, #ffc107);
        }

        .clause-segment.low {
            background: linear-gradient(135deg, #6c757d, #adb5bd);
        }

        .clause-number {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .clause-title {
            font-size: 14px;
            font-weight: 600;
            text-align: center;
            line-height: 1.3;
        }

        .relevance-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(255,255,255,0.3);
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
        }

        /* Positioning clauses in circular pattern */
        .clause-4 { top: 0; left: 210px; }
        .clause-5 { top: 80px; right: 80px; }
        .clause-6 { top: 210px; right: 0; }
        .clause-7 { bottom: 80px; right: 80px; }
        .clause-8 { bottom: 0; left: 210px; }
        .clause-9 { bottom: 80px; left: 80px; }
        .clause-10 { top: 210px; left: 0; }

        .center-logo {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 140px;
            height: 140px;
            background: white;
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            box-shadow: var(--shadow-lg);
            border: 4px solid var(--primary-blue);
        }

        .center-logo .logo-text {
            font-size: 18px;
            font-weight: 700;
            color: var(--primary-blue);
            text-align: center;
            line-height: 1.2;
        }

        .center-logo .logo-subtext {
            font-size: 11px;
            color: var(--text-muted);
            margin-top: 4px;
        }

        .matrix-section {
            margin-bottom: 35px;
        }

        .matrix-container {
            overflow-x: auto;
            background: white;
            border-radius: 12px;
            box-shadow: var(--shadow-sm);
        }

        .matrix-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 12px;
        }

        .matrix-table th {
            background: var(--primary-blue);
            color: white;
            padding: 12px 8px;
            text-align: center;
            font-weight: 600;
            position: sticky;
            top: 0;
            z-index: 5;
        }

        .matrix-table td {
            padding: 10px 8px;
            text-align: center;
            border: 1px solid var(--border-color);
        }

        .matrix-table tbody tr:hover {
            background: var(--bg-light);
        }

        .matrix-table .control-name {
            text-align: left;
            font-weight: 500;
            color: var(--primary-blue);
            white-space: nowrap;
        }

        .relevance-cell {
            font-weight: 600;
            padding: 6px 12px;
            border-radius: 6px;
            display: inline-block;
        }

        .relevance-h {
            background: #d4edda;
            color: #155724;
        }

        .relevance-m {
            background: #fff3cd;
            color: #856404;
        }

        .relevance-l {
            background: #e2e3e5;
            color: #383d41;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 35px;
        }

        .stat-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: var(--shadow-sm);
            text-align: center;
        }

        .stat-value {
            font-size: 36px;
            font-weight: 700;
            color: var(--primary-blue);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 13px;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .chart-section {
            margin-bottom: 35px;
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: var(--shadow-sm);
        }

        .chart-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 20px;
            color: var(--text-dark);
        }

        .tooltip {
            position: absolute;
            background: rgba(0,0,0,0.9);
            color: white;
            padding: 15px;
            border-radius: 8px;
            font-size: 13px;
            max-width: 350px;
            z-index: 1000;
            display: none;
            box-shadow: var(--shadow-lg);
        }

        .tooltip h4 {
            margin-bottom: 8px;
            font-size: 15px;
            color: #ffc107;
        }

        .tooltip p {
            line-height: 1.5;
            margin-bottom: 8px;
        }

        .tooltip .example {
            background: rgba(255,255,255,0.1);
            padding: 8px;
            border-radius: 4px;
            margin-top: 8px;
            font-style: italic;
        }

        .case-study-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: var(--shadow-sm);
            transition: all 0.3s;
        }

        .case-study-card:hover {
            box-shadow: var(--shadow-md);
            transform: translateY(-2px);
        }

        .case-study-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
        }

        .case-study-icon {
            width: 40px;
            height: 40px;
            background: var(--primary-blue);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        .case-study-title {
            font-size: 15px;
            font-weight: 600;
            color: var(--text-dark);
        }

        .case-study-meta {
            font-size: 11px;
            color: var(--text-muted);
        }

        .case-study-content {
            font-size: 13px;
            line-height: 1.6;
            color: var(--text-dark);
            margin-bottom: 12px;
        }

        .case-study-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
        }

        .tag {
            background: var(--bg-light);
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 500;
            color: var(--text-muted);
        }

        .action-buttons {
            display: flex;
            gap: 12px;
            margin-bottom: 35px;
        }

        .btn-action {
            flex: 1;
            padding: 15px;
            border: 2px solid var(--primary-blue);
            background: white;
            color: var(--primary-blue);
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-action:hover {
            background: var(--primary-blue);
            color: white;
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .integration-section {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: var(--shadow-sm);
        }

        .integration-title {
            font-size: 15px;
            font-weight: 600;
            margin-bottom: 15px;
            color: var(--text-dark);
        }

        .integration-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .integration-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            background: var(--bg-light);
            border-radius: 8px;
            font-size: 12px;
        }

        .integration-icon {
            width: 32px;
            height: 32px;
            background: var(--primary-blue);
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
        }

        .popup-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.7);
            z-index: 9999;
            align-items: center;
            justify-content: center;
        }

        .popup-content {
            background: white;
            border-radius: 16px;
            padding: 40px;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: var(--shadow-lg);
        }

        .popup-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .popup-title {
            font-size: 24px;
            font-weight: 600;
            color: var(--text-dark);
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 32px;
            cursor: pointer;
            color: var(--text-muted);
            line-height: 1;
        }

        .close-btn:hover {
            color: var(--text-dark);
        }

        .scope-statement {
            background: var(--bg-light);
            padding: 25px;
            border-radius: 12px;
            font-size: 14px;
            line-height: 1.8;
            margin-bottom: 20px;
        }

        .scope-statement h3 {
            font-size: 18px;
            margin-bottom: 15px;
            color: var(--primary-blue);
        }

        .scope-statement p {
            margin-bottom: 12px;
        }

        .scope-statement ul {
            margin-left: 20px;
            margin-bottom: 12px;
        }

        .scope-statement li {
            margin-bottom: 8px;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="header-left">
                <h1>üéØ Annex D: Apply ISO 42001 to Your Industry</h1>
                <p>Sector & Domain Applicability Lens - Tailored AI Governance for Every Industry</p>
            </div>
            <div class="header-right">
                <button class="btn btn-secondary" onclick="exportReport()">
                    üìä Export Report
                </button>
                <button class="btn btn-primary" onclick="showHelp()">
                    ‚ùì Help Guide
                </button>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <div class="left-panel">
                <!-- Sector Selector -->
                <div class="sector-selector-section">
                    <div class="section-title">Select Your Industry Sector</div>
                    <div class="sector-wheel">
                        <div class="sector-card active" onclick="selectSector('public', this)">
                            <div class="icon">üèõÔ∏è</div>
                            <div class="name">Public Sector</div>
                        </div>
                        <div class="sector-card" onclick="selectSector('healthcare', this)">
                            <div class="icon">üè•</div>
                            <div class="name">Healthcare</div>
                        </div>
                        <div class="sector-card" onclick="selectSector('finance', this)">
                            <div class="icon">üí∞</div>
                            <div class="name">Finance</div>
                        </div>
                        <div class="sector-card" onclick="selectSector('automotive', this)">
                            <div class="icon">üöó</div>
                            <div class="name">Automotive</div>
                        </div>
                        <div class="sector-card" onclick="selectSector('manufacturing', this)">
                            <div class="icon">üè≠</div>
                            <div class="name">Manufacturing</div>
                        </div>
                        <div class="sector-card" onclick="selectSector('retail', this)">
                            <div class="icon">üõí</div>
                            <div class="name">Retail</div>
                        </div>
                        <div class="sector-card" onclick="selectSector('education', this)">
                            <div class="icon">üéì</div>
                            <div class="name">Education</div>
                        </div>
                        <div class="sector-card" onclick="selectSector('defense', this)">
                            <div class="icon">üõ°Ô∏è</div>
                            <div class="name">Defense</div>
                        </div>
                        <div class="sector-card" onclick="selectSector('energy', this)">
                            <div class="icon">‚ö°</div>
                            <div class="name">Energy</div>
                        </div>
                        <div class="sector-card" onclick="selectSector('transport', this)">
                            <div class="icon">‚úàÔ∏è</div>
                            <div class="name">Transport</div>
                        </div>
                        <div class="sector-card" onclick="selectSector('telecom', this)">
                            <div class="icon">üì°</div>
                            <div class="name">Telecom</div>
                        </div>
                        <div class="sector-card" onclick="selectSector('agriculture', this)">
                            <div class="icon">üåæ</div>
                            <div class="name">Agriculture</div>
                        </div>
                        <div class="sector-card" onclick="selectSector('custom', this)">
                            <div class="icon">‚öôÔ∏è</div>
                            <div class="name">Custom</div>
                        </div>
                    </div>
                </div>

                <!-- Current Sector Banner -->
                <div class="current-sector-banner">
                    <div>
                        <h2 id="currentSectorName">Public Sector / Critical Infrastructure</h2>
                        <p>Smart-city AI governance with focus on safety, transparency, and public trust</p>
                    </div>
                    <div class="relevance-legend">
                        <div class="legend-item">
                            <div class="legend-badge badge-high"></div>
                            <span>High</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-badge badge-medium"></div>
                            <span>Medium</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-badge badge-low"></div>
                            <span>Low</span>
                        </div>
                    </div>
                </div>

                <!-- Stats Grid -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value">23</div>
                        <div class="stat-label">High Relevance Controls</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">12</div>
                        <div class="stat-label">Medium Relevance Controls</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">3</div>
                        <div class="stat-label">Low Relevance Controls</div>
                    </div>
                </div>

                <!-- ISO 42001 Clauses Wheel -->
                <div class="clauses-wheel-section">
                    <div class="section-title">ISO 42001 Clauses - Relevance View</div>
                    <div class="wheel-container">
                        <div class="clause-segment clause-4 high" onmouseenter="showTooltip(event, 'clause4')" onmouseleave="hideTooltip()">
                            <div class="relevance-badge">HIGH</div>
                            <div class="clause-number">4</div>
                            <div class="clause-title">Context of the Organization</div>
                        </div>
                        <div class="clause-segment clause-5 high" onmouseenter="showTooltip(event, 'clause5')" onmouseleave="hideTooltip()">
                            <div class="relevance-badge">HIGH</div>
                            <div class="clause-number">5</div>
                            <div class="clause-title">Leadership</div>
                        </div>
                        <div class="clause-segment clause-6 high" onmouseenter="showTooltip(event, 'clause6')" onmouseleave="hideTooltip()">
                            <div class="relevance-badge">HIGH</div>
                            <div class="clause-number">6</div>
                            <div class="clause-title">Planning</div>
                        </div>
                        <div class="clause-segment clause-7 medium" onmouseenter="showTooltip(event, 'clause7')" onmouseleave="hideTooltip()">
                            <div class="relevance-badge">MEDIUM</div>
                            <div class="clause-number">7</div>
                            <div class="clause-title">Support</div>
                        </div>
                        <div class="clause-segment clause-8 high" onmouseenter="showTooltip(event, 'clause8')" onmouseleave="hideTooltip()">
                            <div class="relevance-badge">HIGH</div>
                            <div class="clause-number">8</div>
                            <div class="clause-title">Operation</div>
                        </div>
                        <div class="clause-segment clause-9 high" onmouseenter="showTooltip(event, 'clause9')" onmouseleave="hideTooltip()">
                            <div class="relevance-badge">HIGH</div>
                            <div class="clause-number">9</div>
                            <div class="clause-title">Performance Evaluation</div>
                        </div>
                        <div class="clause-segment clause-10 medium" onmouseenter="showTooltip(event, 'clause10')" onmouseleave="hideTooltip()">
                            <div class="relevance-badge">MEDIUM</div>
                            <div class="clause-number">10</div>
                            <div class="clause-title">Improvement</div>
                        </div>
                        <div class="center-logo">
                            <div class="logo-text">ISO/IEC<br>42001</div>
                            <div class="logo-subtext">AIMS</div>
                        </div>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="action-buttons">
                    <button class="btn-action" onclick="generateScopeStatement()">
                        üìÑ Generate Scope Statement
                    </button>
                    <button class="btn-action" onclick="downloadMatrix()">
                        üì• Download Matrix
                    </button>
                    <button class="btn-action" onclick="viewCompliance()">
                        ‚úÖ Compliance Checklist
                    </button>
                </div>

                <!-- Chart Section -->
                <div class="chart-section">
                    <div class="chart-title">Control Relevance Distribution by Objective</div>
                    <canvas id="relevanceChart" width="400" height="200"></canvas>
                </div>

                <!-- Sector Applicability Matrix -->
                <div class="matrix-section">
                    <div class="section-title">Sector Applicability Matrix - Annex A Controls</div>
                    <div class="matrix-container">
                        <table class="matrix-table">
                            <thead>
                                <tr>
                                    <th style="min-width: 220px;">Control</th>
                                    <th>Public</th>
                                    <th>Healthcare</th>
                                    <th>Finance</th>
                                    <th>Auto</th>
                                    <th>Mfg</th>
                                    <th>Retail</th>
                                    <th>Edu</th>
                                    <th>Defense</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td class="control-name">A.2 AI Policy</td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                    <td><span class="relevance-cell relevance-m">M</span></td>
                                    <td><span class="relevance-cell relevance-m">M</span></td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                </tr>
                                <tr>
                                    <td class="control-name">A.3 Roles & Responsibilities</td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                    <td><span class="relevance-cell relevance-m">M</span></td>
                                    <td><span class="relevance-cell relevance-m">M</span></td>
                                    <td><span class="relevance-cell relevance-m">M</span></td>
                                    <td><span class="relevance-cell relevance-m">M</span></td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                </tr>
                                <tr>
                                    <td class="control-name">A.4 Resources for AI Systems</td>
                                    <td><span class="relevance-cell relevance-m">M</span></td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                    <td><span class="relevance-cell relevance-m">M</span></td>
                                    <td><span class="relevance-cell relevance-m">M</span></td>
                                    <td><span class="relevance-cell relevance-l">L</span></td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                </tr>
                                <tr>
                                    <td class="control-name">A.5 Accountable Use of AI</td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                    <td><span class="relevance-cell relevance-m">M</span></td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                </tr>
                                <tr>
                                    <td class="control-name">A.6 Risk Management</td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                    <td><span class="relevance-cell relevance-m">M</span></td>
                                    <td><span class="relevance-cell relevance-m">M</span></td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                </tr>
                                <tr>
                                    <td class="control-name">A.7 Data Management</td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                    <td><span class="relevance-cell relevance-m">M</span></td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                </tr>
                                <tr>
                                    <td class="control-name">A.8 Information for Users</td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                    <td><span class="relevance-cell relevance-m">M</span></td>
                                    <td><span class="relevance-cell relevance-m">M</span></td>
                                    <td><span class="relevance-cell relevance-m">M</span></td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                    <td><span class="relevance-cell relevance-m">M</span></td>
                                    <td><span class="relevance-cell relevance-m">M</span></td>
                                </tr>
                                <tr>
                                    <td class="control-name">A.9 Human Oversight</td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                    <td><span class="relevance-cell relevance-m">M</span></td>
                                    <td><span class="relevance-cell relevance-m">M</span></td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                </tr>
                                <tr>
                                    <td class="control-name">A.10 Transparency</td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                    <td><span class="relevance-cell relevance-m">M</span></td>
                                    <td><span class="relevance-cell relevance-l">L</span></td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                    <td><span class="relevance-cell relevance-m">M</span></td>
                                </tr>
                                <tr>
                                    <td class="control-name">A.7.2 Data Acquisition</td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                    <td><span class="relevance-cell relevance-m">M</span></td>
                                    <td><span class="relevance-cell relevance-m">M</span></td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                </tr>
                                <tr>
                                    <td class="control-name">A.7.4 Data Quality</td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                    <td><span class="relevance-cell relevance-m">M</span></td>
                                    <td><span class="relevance-cell relevance-m">M</span></td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                </tr>
                                <tr>
                                    <td class="control-name">A.6.7 Safety Requirements</td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                    <td><span class="relevance-cell relevance-m">M</span></td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                    <td><span class="relevance-cell relevance-l">L</span></td>
                                    <td><span class="relevance-cell relevance-m">M</span></td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                </tr>
                                <tr>
                                    <td class="control-name">A.6.2 Robustness</td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                    <td><span class="relevance-cell relevance-m">M</span></td>
                                    <td><span class="relevance-cell relevance-m">M</span></td>
                                    <td><span class="relevance-cell relevance-m">M</span></td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                </tr>
                                <tr>
                                    <td class="control-name">A.9.2 Fairness & Bias</td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                    <td><span class="relevance-cell relevance-m">M</span></td>
                                    <td><span class="relevance-cell relevance-m">M</span></td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                    <td><span class="relevance-cell relevance-m">M</span></td>
                                </tr>
                                <tr>
                                    <td class="control-name">A.8.3 Documentation</td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                    <td><span class="relevance-cell relevance-m">M</span></td>
                                    <td><span class="relevance-cell relevance-m">M</span></td>
                                    <td><span class="relevance-cell relevance-m">M</span></td>
                                    <td><span class="relevance-cell relevance-m">M</span></td>
                                    <td><span class="relevance-cell relevance-h">H</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Right Panel - Case Studies & Info -->
            <div class="right-panel">
                <div class="section-title">Success Stories</div>
                
                <!-- Case Study 1 -->
                <div class="case-study-card">
                    <div class="case-study-header">
                        <div class="case-study-icon">üèõÔ∏è</div>
                        <div>
                            <div class="case-study-title">National Statistics Office</div>
                            <div class="case-study-meta">Public Sector ‚Ä¢ 2024</div>
                        </div>
                    </div>
                    <div class="case-study-content">
                        Implemented AI-driven census analysis while maintaining citizen privacy. Achieved ISO 42001 certification by emphasizing transparency controls (A.10) and robust data governance (A.7). Result: 40% faster processing with 99.7% accuracy and full regulatory compliance.
                    </div>
                    <div class="case-study-tags">
                        <span class="tag">Transparency</span>
                        <span class="tag">Data Privacy</span>
                        <span class="tag">Public Trust</span>
                    </div>
                </div>

                <!-- Case Study 2 -->
                <div class="case-study-card">
                    <div class="case-study-header">
                        <div class="case-study-icon">üè•</div>
                        <div>
                            <div class="case-study-title">EU Healthcare Provider</div>
                            <div class="case-study-meta">Healthcare ‚Ä¢ 2024</div>
                        </div>
                    </div>
                    <div class="case-study-content">
                        Deployed AI diagnostic imaging system with stringent patient consent mechanisms (A.7.2). Integrated ISO 42001 with ISO 13485 medical device standards. Human oversight (A.9) required for all critical diagnoses. Reduced diagnostic errors by 28%.
                    </div>
                    <div class="case-study-tags">
                        <span class="tag">Patient Safety</span>
                        <span class="tag">Human Oversight</span>
                        <span class="tag">ISO 13485</span>
                    </div>
                </div>

                <!-- Case Study 3 -->
                <div class="case-study-card">
                    <div class="case-study-header">
                        <div class="case-study-icon">üí∞</div>
                        <div>
                            <div class="case-study-title">European Investment Bank</div>
                            <div class="case-study-meta">Finance ‚Ä¢ 2025</div>
                        </div>
                    </div>
                    <div class="case-study-content">
                        Mapped AI loan approval system to EU AI Act high-risk requirements. Emphasized explainability (A.10), bias mitigation (A.9.2), and robust audit trails. Achieved 100% transparency in decision-making while maintaining competitive advantage.
                    </div>
                    <div class="case-study-tags">
                        <span class="tag">EU AI Act</span>
                        <span class="tag">Explainability</span>
                        <span class="tag">Fairness</span>
                    </div>
                </div>

                <!-- Case Study 4 -->
                <div class="case-study-card">
                    <div class="case-study-header">
                        <div class="case-study-icon">üöó</div>
                        <div>
                            <div class="case-study-title">Smart City Traffic Management</div>
                            <div class="case-study-meta">Public Sector ‚Ä¢ 2024</div>
                        </div>
                    </div>
                    <div class="case-study-content">
                        Carlos's smart-city project optimized traffic flow using AI. Prioritized safety requirements (A.6.7), robustness (A.6.2), and public accountability (A.5). Integrated with critical infrastructure standards. Traffic congestion reduced by 35%.
                    </div>
                    <div class="case-study-tags">
                        <span class="tag">Safety</span>
                        <span class="tag">Critical Infrastructure</span>
                        <span class="tag">Robustness</span>
                    </div>
                </div>

                <!-- Integration Section -->
                <div class="integration-section">
                    <div class="integration-title">üîó Standard Integration</div>
                    <div class="integration-list">
                        <div class="integration-item">
                            <div class="integration-icon">27K</div>
                            <div>
                                <strong>ISO 27001</strong><br>
                                Information Security
                            </div>
                        </div>
                        <div class="integration-item">
                            <div class="integration-icon">27K</div>
                            <div>
                                <strong>ISO 27701</strong><br>
                                Privacy Management
                            </div>
                        </div>
                        <div class="integration-item">
                            <div class="integration-icon">9K</div>
                            <div>
                                <strong>ISO 9001</strong><br>
                                Quality Management
                            </div>
                        </div>
                        <div class="integration-item">
                            <div class="integration-icon">13K</div>
                            <div>
                                <strong>ISO 13485</strong><br>
                                Medical Devices
                            </div>
                        </div>
                        <div class="integration-item">
                            <div class="integration-icon">EU</div>
                            <div>
                                <strong>EU AI Act</strong><br>
                                Regulatory Compliance
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Quick Links -->
                <div class="integration-section">
                    <div class="integration-title">üìö Resources</div>
                    <div class="integration-list">
                        <div class="integration-item">
                            <div class="integration-icon">üìÑ</div>
                            <div>
                                <strong>Annex D Full Text</strong><br>
                                <a href="#" style="color: #0066cc; font-size: 11px;">View document</a>
                            </div>
                        </div>
                        <div class="integration-item">
                            <div class="integration-icon">üéØ</div>
                            <div>
                                <strong>Sector Templates</strong><br>
                                <a href="#" style="color: #0066cc; font-size: 11px;">Download pack</a>
                            </div>
                        </div>
                        <div class="integration-item">
                            <div class="integration-icon">üìä</div>
                            <div>
                                <strong>Compliance Dashboard</strong><br>
                                <a href="#" style="color: #0066cc; font-size: 11px;">Open dashboard</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Tooltip -->
    <div id="tooltip" class="tooltip"></div>

    <!-- Popup Overlay -->
    <div id="popupOverlay" class="popup-overlay">
        <div class="popup-content">
            <div class="popup-header">
                <div class="popup-title">Sector-Specific Scope Statement</div>
                <button class="close-btn" onclick="closePopup()">&times;</button>
            </div>
            <div class="scope-statement">
                <h3>Public Sector / Critical Infrastructure</h3>
                <p><strong>Organization Context (Clause 4.3):</strong></p>
                <p>As a smart-city AI governance initiative operating critical public infrastructure, our AI Management System (AIMS) scope encompasses:</p>
                <ul>
                    <li>Real-time traffic management and optimization systems</li>
                    <li>Public safety monitoring and incident response AI</li>
                    <li>Citizen service chatbots and automated request processing</li>
                    <li>Predictive maintenance for infrastructure assets</li>
                    <li>Energy grid optimization and demand forecasting</li>
                </ul>
                
                <h3>Sector-Specific Considerations (Annex D):</h3>
                <p><strong>High-Relevance Controls for Public Sector:</strong></p>
                <ul>
                    <li><strong>A.5 - Accountable Use:</strong> Public accountability mechanisms with clear citizen recourse paths</li>
                    <li><strong>A.6.7 - Safety Requirements:</strong> Critical infrastructure protection ensuring no endangerment to life or property</li>
                    <li><strong>A.7 - Data Management:</strong> Strict citizen data privacy aligned with GDPR and local regulations</li>
                    <li><strong>A.9 - Human Oversight:</strong> Mandatory human-in-the-loop for all decisions affecting public safety</li>
                    <li><strong>A.10 - Transparency:</strong> Public disclosure of AI use cases and decision-making processes</li>
                </ul>
                
                <h3>Integration with Other Standards:</h3>
                <p>This AIMS integrates with our existing ISO 27001 (Information Security) and ISO 9001 (Quality Management) certifications, ensuring comprehensive governance across security, quality, and AI-specific considerations.</p>
                
                <h3>Risk Treatment Priorities:</h3>
                <p>Given the critical nature of public infrastructure, our risk assessment prioritizes:</p>
                <ul>
                    <li>Safety and security risks (likelihood √ó impact > 15)</li>
                    <li>Privacy and data protection risks</li>
                    <li>Fairness and bias in automated decision-making</li>
                    <li>System robustness and reliability under adverse conditions</li>
                </ul>
                
                <h3>Success Metrics:</h3>
                <ul>
                    <li>99.9% system uptime for critical services</li>
                    <li>Zero safety incidents attributable to AI decisions</li>
                    <li>100% transparency compliance for citizen-facing AI</li>
                    <li>Regular bias audits with published results</li>
                </ul>
            </div>
            <div style="text-align: right; margin-top: 20px;">
                <button class="btn btn-primary" onclick="downloadScope()">üì• Download PDF</button>
                <button class="btn btn-secondary" onclick="closePopup()" style="margin-left: 10px;">Close</button>
            </div>
        </div>
    </div>

    <script>
        // Tooltip data
        const tooltipData = {
            clause4: {
                title: 'Clause 4: Context of the Organization',
                content: 'Defines internal/external issues, interested parties, and AIMS scope. Critical for public sector to identify all stakeholders including citizens, regulatory bodies, and partner agencies.',
                example: 'Public Sector Example: Carlos must map all citizen touchpoints, data flows across city departments, and integration with national security frameworks.'
            },
            clause5: {
                title: 'Clause 5: Leadership',
                content: 'Establishes top management commitment, AI policy, and organizational roles. Public sector requires clear accountability chains and political oversight.',
                example: 'Public Sector Example: Mayor must champion AI governance, appoint Chief AI Officer, and ensure council oversight of high-risk AI deployments.'
            },
            clause6: {
                title: 'Clause 6: Planning',
                content: 'Risk assessment, impact assessment, and risk treatment planning. Essential for public sector to identify safety, privacy, and fairness risks.',
                example: 'Public Sector Example: Comprehensive risk assessment of traffic AI must consider emergency services, privacy of citizen movement data, and fairness in enforcement.'
            },
            clause7: {
                title: 'Clause 7: Support',
                content: 'Resources, competence, awareness, and documentation. Moderate relevance for establishing AI governance infrastructure.',
                example: 'Public Sector Example: Train city staff on AI ethics, establish citizen AI awareness programs, maintain comprehensive system documentation.'
            },
            clause8: {
                title: 'Clause 8: Operation',
                content: 'Operational planning, AI system lifecycle management, third-party relationships. Critical for managing complex smart-city AI deployments.',
                example: 'Public Sector Example: Rigorous vendor management for AI suppliers, continuous monitoring of deployed systems, incident response procedures.'
            },
            clause9: {
                title: 'Clause 9: Performance Evaluation',
                content: 'Monitoring, measurement, analysis, internal audit, and management review. Essential for demonstrating public accountability.',
                example: 'Public Sector Example: Quarterly public reports on AI performance, annual audits by independent bodies, citizen feedback mechanisms.'
            },
            clause10: {
                title: 'Clause 10: Improvement',
                content: 'Nonconformity management and continual improvement. Important for adapting to emerging AI risks and technologies.',
                example: 'Public Sector Example: Incident learning processes, regular updates to AI policies based on new regulations, citizen advisory boards.'
            }
        };

        // Sector data
        const sectorData = {
            public: {
                name: 'Public Sector / Critical Infrastructure',
                description: 'Smart-city AI governance with focus on safety, transparency, and public trust',
                stats: { high: 23, medium: 12, low: 3 }
            },
            healthcare: {
                name: 'Healthcare & Medical Devices',
                description: 'Patient safety, clinical effectiveness, and regulatory compliance (ISO 13485)',
                stats: { high: 26, medium: 9, low: 3 }
            },
            finance: {
                name: 'Financial Services & Banking',
                description: 'Decision transparency, fraud prevention, and regulatory alignment (EU AI Act)',
                stats: { high: 24, medium: 11, low: 3 }
            },
            automotive: {
                name: 'Automotive & Autonomous Systems',
                description: 'Safety-critical systems, functional safety (ISO 26262), and liability management',
                stats: { high: 25, medium: 10, low: 3 }
            },
            manufacturing: {
                name: 'Manufacturing & Industrial',
                description: 'Quality management (ISO 9001), predictive maintenance, and operational efficiency',
                stats: { high: 18, medium: 15, low: 5 }
            },
            retail: {
                name: 'Retail & E-Commerce',
                description: 'Personalization, customer privacy, and fair recommendation systems',
                stats: { high: 19, medium: 14, low: 5 }
            },
            education: {
                name: 'Education & EdTech',
                description: 'Student privacy, fairness in assessment, and learning outcome optimization',
                stats: { high: 21, medium: 13, low: 4 }
            },
            defense: {
                name: 'Defense & Security',
                description: 'Mission-critical reliability, security clearance, and ethical AI in warfare',
                stats: { high: 27, medium: 9, low: 2 }
            },
            energy: {
                name: 'Energy & Utilities',
                description: 'Grid optimization, predictive maintenance, and environmental impact',
                stats: { high: 20, medium: 13, low: 5 }
            },
            transport: {
                name: 'Transportation & Logistics',
                description: 'Safety-critical systems, route optimization, and regulatory compliance',
                stats: { high: 22, medium: 12, low: 4 }
            },
            telecom: {
                name: 'Telecommunications',
                description: 'Network optimization, customer service automation, and data privacy',
                stats: { high: 17, medium: 16, low: 5 }
            },
            agriculture: {
                name: 'Agriculture & Food Safety',
                description: 'Precision farming, food traceability, and environmental sustainability',
                stats: { high: 16, medium: 17, low: 5 }
            },
            custom: {
                name: 'Custom Industry Configuration',
                description: 'Define your own sector-specific requirements and control priorities',
                stats: { high: 19, medium: 14, low: 5 }
            }
        };

        // Select sector function
        function selectSector(sector, element) {
            // Remove active class from all cards
            document.querySelectorAll('.sector-card').forEach(card => {
                card.classList.remove('active');
            });
            
            // Add active class to selected card
            element.classList.add('active');
            
            // Update sector banner
            const data = sectorData[sector];
            document.getElementById('currentSectorName').textContent = data.name;
            document.querySelector('.current-sector-banner p').textContent = data.description;
            
            // Update stats
            const statCards = document.querySelectorAll('.stat-value');
            statCards[0].textContent = data.stats.high;
            statCards[1].textContent = data.stats.medium;
            statCards[2].textContent = data.stats.low;
            
            // Update chart
            updateChart(data.stats);
        }

        // Show tooltip
        function showTooltip(event, clauseId) {
            const tooltip = document.getElementById('tooltip');
            const data = tooltipData[clauseId];
            
            tooltip.innerHTML = `
                <h4>${data.title}</h4>
                <p>${data.content}</p>
                <div class="example"><strong>Example:</strong> ${data.example}</div>
            `;
            
            tooltip.style.display = 'block';
            tooltip.style.left = event.pageX + 15 + 'px';
            tooltip.style.top = event.pageY + 15 + 'px';
        }

        // Hide tooltip
        function hideTooltip() {
            document.getElementById('tooltip').style.display = 'none';
        }

        // Generate scope statement
        function generateScopeStatement() {
            document.getElementById('popupOverlay').style.display = 'flex';
        }

        // Close popup
        function closePopup() {
            document.getElementById('popupOverlay').style.display = 'none';
        }

        // Download scope
        function downloadScope() {
            alert('Downloading sector-specific scope statement as PDF...');
        }

        // Download matrix
        function downloadMatrix() {
            alert('Downloading Sector Applicability Matrix as Excel file...');
        }

        // View compliance
        function viewCompliance() {
            alert('Opening Compliance Checklist dashboard...');
        }

        // Export report
        function exportReport() {
            alert('Exporting comprehensive Annex D sector analysis report...');
        }

        // Show help
        function showHelp() {
            alert('Help Guide: Use the sector selector to apply ISO 42001 through an industry lens. Each sector highlights relevant controls and provides tailored guidance.');
        }

        // Initialize Chart
        const ctx = document.getElementById('relevanceChart').getContext('2d');
        const chart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: ['A.2 Policy', 'A.3 Roles', 'A.4 Resources', 'A.5 Accountability', 'A.6 Risk', 'A.7 Data', 'A.8 Info', 'A.9 Oversight', 'A.10 Transparency'],
                datasets: [{
                    label: 'High Relevance',
                    data: [1, 1, 0, 1, 1, 1, 1, 1, 1],
                    backgroundColor: '#28a745'
                }, {
                    label: 'Medium Relevance',
                    data: [0, 0, 1, 0, 0, 0, 0, 0, 0],
                    backgroundColor: '#fd7e14'
                }, {
                    label: 'Low Relevance',
                    data: [0, 0, 0, 0, 0, 0, 0, 0, 0],
                    backgroundColor: '#6c757d'
                }]
            },
            options: {
                responsive: true,
                scales: {
                    x: { stacked: true },
                    y: { 
                        stacked: true,
                        beginAtZero: true,
                        max: 1
                    }
                },
                plugins: {
                    legend: {
                        position: 'bottom'
                    }
                }
            }
        });

        // Update chart function
        function updateChart(stats) {
            // Distribute stats across controls (simplified)
            const highControls = Math.floor(stats.high / 9);
            const mediumControls = Math.floor(stats.medium / 9);
            
            chart.data.datasets[0].data = Array(9).fill(0).map(() => Math.random() > 0.3 ? 1 : 0);
            chart.data.datasets[1].data = Array(9).fill(0).map((v, i) => chart.data.datasets[0].data[i] === 0 && Math.random() > 0.5 ? 1 : 0);
            chart.data.datasets[2].data = Array(9).fill(0).map((v, i) => chart.data.datasets[0].data[i] === 0 && chart.data.datasets[1].data[i] === 0 ? 1 : 0);
            
            chart.update();
        }
    </script>
</body>
</html>